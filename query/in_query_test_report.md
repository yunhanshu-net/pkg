# SQL IN æŸ¥è¯¢åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•æ¦‚è¿°

å¯¹ `pkg/query` åŒ…ä¸­çš„ SQL `IN` æŸ¥è¯¢åŠŸèƒ½è¿›è¡Œäº†å…¨é¢æµ‹è¯•ï¼ŒéªŒè¯äº†å„ç§åœºæ™¯ä¸‹çš„æŸ¥è¯¢æ­£ç¡®æ€§å’Œæ€§èƒ½è¡¨ç°ã€‚

## æµ‹è¯•ç”¨ä¾‹

### 1. åŸºç¡€ IN æŸ¥è¯¢æµ‹è¯•
**æµ‹è¯•ç”¨ä¾‹**: `TestInQueryCondition`
- **æŸ¥è¯¢æ¡ä»¶**: `in=status:active,pending`
- **é¢„æœŸç»“æœ**: 6ä¸ªç”¨æˆ·ï¼ˆAlice, Charlie, David, Eve, Grace, Henryï¼‰
- **ç”ŸæˆSQL**: `SELECT * FROM in_test_users WHERE status IN ("active","pending")`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

### 2. å¤šç§ IN æŸ¥è¯¢æ¡ä»¶æµ‹è¯•
**æµ‹è¯•ç”¨ä¾‹**: `TestVariousInConditions`

#### 2.1 çŠ¶æ€æŸ¥è¯¢
- **æŸ¥è¯¢æ¡ä»¶**: `in=status:active,pending`
- **é¢„æœŸç»“æœ**: 6ä¸ªç”¨æˆ·
- **ç”ŸæˆSQL**: `SELECT * FROM in_test_users WHERE status IN ("active","pending")`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

#### 2.2 åˆ†ç±»æŸ¥è¯¢
- **æŸ¥è¯¢æ¡ä»¶**: `in=category:A,B`
- **é¢„æœŸç»“æœ**: 6ä¸ªç”¨æˆ·
- **ç”ŸæˆSQL**: `SELECT * FROM in_test_users WHERE category IN ("A","B")`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

#### 2.3 åˆ†æ•°æŸ¥è¯¢
- **æŸ¥è¯¢æ¡ä»¶**: `in=score:85,92,95`
- **é¢„æœŸç»“æœ**: 3ä¸ªç”¨æˆ·ï¼ˆAlice, Bob, Eveï¼‰
- **ç”ŸæˆSQL**: `SELECT * FROM in_test_users WHERE score IN (85,92,95)`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

#### 2.4 å§“åæŸ¥è¯¢
- **æŸ¥è¯¢æ¡ä»¶**: `in=name:Alice,Bob,Charlie`
- **é¢„æœŸç»“æœ**: 3ä¸ªç”¨æˆ·
- **ç”ŸæˆSQL**: `SELECT * FROM in_test_users WHERE name IN ("Alice","Bob","Charlie")`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

#### 2.5 ä¸å­˜åœ¨å€¼æŸ¥è¯¢
- **æŸ¥è¯¢æ¡ä»¶**: `in=status:nonexistent`
- **é¢„æœŸç»“æœ**: 0ä¸ªç”¨æˆ·
- **ç”ŸæˆSQL**: `SELECT * FROM in_test_users WHERE status IN ("nonexistent")`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

### 3. æ•°å­—ç±»å‹ IN æŸ¥è¯¢æµ‹è¯•
**æµ‹è¯•ç”¨ä¾‹**: `TestNumericInQuery`
- **æŸ¥è¯¢æ¡ä»¶**: `in=score:85,92,95`
- **é¢„æœŸç»“æœ**: 3ä¸ªç”¨æˆ·
- **ç”ŸæˆSQL**: `SELECT * FROM in_test_users WHERE score IN (85,92,95)`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡
- **è¯´æ˜**: éªŒè¯äº†æ•°å­—ç±»å‹çš„è‡ªåŠ¨ç±»å‹è½¬æ¢åŠŸèƒ½

### 4. å®Œæ•´æŸ¥è¯¢æµç¨‹æµ‹è¯•
**æµ‹è¯•ç”¨ä¾‹**: `TestCompleteInQueryFlow`
- **æŸ¥è¯¢æ¡ä»¶**: `in=status:active,pending&page=1&page_size=5&sorts=score:desc`
- **é¢„æœŸç»“æœ**: 
  - æ€»è®°å½•æ•°: 6
  - ç¬¬ä¸€é¡µè®°å½•æ•°: 5
  - æŒ‰åˆ†æ•°é™åºæ’åˆ—
- **ç”ŸæˆSQL**: 
  - è®¡æ•°: `SELECT count(*) FROM in_test_users WHERE status IN ("active","pending")`
  - æŸ¥è¯¢: `SELECT * FROM in_test_users WHERE status IN ("active","pending") ORDER BY score DESC LIMIT 5`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

### 5. å¤šä¸ª IN æ¡ä»¶æµ‹è¯•
**æµ‹è¯•ç”¨ä¾‹**: `TestMultipleInConditions`
- **æŸ¥è¯¢æ¡ä»¶**: `in=status:active&in=category:A,B`
- **é¢„æœŸç»“æœ**: 3ä¸ªç”¨æˆ·ï¼ˆAlice, Charlie, Eveï¼‰
- **è¯´æ˜**: éªŒè¯å¤šä¸ª IN æ¡ä»¶çš„ AND é€»è¾‘
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

### 6. æ‰‹åŠ¨æŸ¥è¯¢å¯¹æ¯”æµ‹è¯•
**æµ‹è¯•ç”¨ä¾‹**: `TestManualInQuery`
- **æ‰‹åŠ¨SQL**: `SELECT * FROM in_test_users WHERE status IN ("active", "pending")`
- **é¢„æœŸç»“æœ**: 6ä¸ªç”¨æˆ·
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡
- **è¯´æ˜**: éªŒè¯è‡ªåŠ¨ç”Ÿæˆçš„ SQL ä¸æ‰‹åŠ¨ç¼–å†™çš„ SQL ç»“æœä¸€è‡´

## æµ‹è¯•æ•°æ®

### æµ‹è¯•ç”¨æˆ·æ•°æ®
```
Alice   - active  - A - 85
Bob     - inactive- B - 92
Charlie - active  - A - 78
David   - pending - C - 88
Eve     - active  - B - 95
Frank   - inactive- A - 82
Grace   - active  - C - 90
Henry   - pending - B - 87
```

### æŸ¥è¯¢ç»“æœéªŒè¯
- **status:active,pending**: 6ä¸ªç”¨æˆ·ï¼ˆAlice, Charlie, David, Eve, Grace, Henryï¼‰
- **category:A,B**: 6ä¸ªç”¨æˆ·ï¼ˆAlice, Bob, Charlie, Eve, Frank, Henryï¼‰
- **score:85,92,95**: 3ä¸ªç”¨æˆ·ï¼ˆAlice, Bob, Eveï¼‰
- **name:Alice,Bob,Charlie**: 3ä¸ªç”¨æˆ·ï¼ˆAlice, Bob, Charlieï¼‰

## åŠŸèƒ½ç‰¹æ€§éªŒè¯

### âœ… å·²éªŒè¯åŠŸèƒ½
1. **å­—ç¬¦ä¸²ç±»å‹ IN æŸ¥è¯¢**: æ­£ç¡®å¤„ç†å­—ç¬¦ä¸²å€¼çš„ IN æŸ¥è¯¢
2. **æ•°å­—ç±»å‹ IN æŸ¥è¯¢**: è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œæ­£ç¡®å¤„ç†æ•°å­—å€¼çš„ IN æŸ¥è¯¢
3. **å¤šå€¼æŸ¥è¯¢**: æ”¯æŒé€—å·åˆ†éš”çš„å¤šä¸ªå€¼
4. **åˆ†é¡µåŠŸèƒ½**: ä¸ IN æŸ¥è¯¢æ­£ç¡®ç»“åˆ
5. **æ’åºåŠŸèƒ½**: ä¸ IN æŸ¥è¯¢æ­£ç¡®ç»“åˆ
6. **å¤šä¸ª IN æ¡ä»¶**: æ”¯æŒå¤šä¸ªå­—æ®µçš„ IN æŸ¥è¯¢ï¼ˆAND é€»è¾‘ï¼‰
7. **ç©ºç»“æœå¤„ç†**: æ­£ç¡®å¤„ç†ä¸å­˜åœ¨çš„å€¼
8. **SQL ç”Ÿæˆ**: ç”Ÿæˆæ­£ç¡®çš„ SQL è¯­å¥

### ğŸ” æŠ€æœ¯ç»†èŠ‚
1. **ç±»å‹è½¬æ¢**: è‡ªåŠ¨è¯†åˆ«æ•°å­—å­—ç¬¦ä¸²å¹¶è½¬æ¢ä¸ºæ•°å­—ç±»å‹
2. **SQL å®‰å…¨**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢ SQL æ³¨å…¥
3. **æ€§èƒ½ä¼˜åŒ–**: ç”Ÿæˆçš„ SQL è¯­å¥é«˜æ•ˆ
4. **é”™è¯¯å¤„ç†**: æ­£ç¡®å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µ

## æ€§èƒ½è¡¨ç°

### æŸ¥è¯¢æ€§èƒ½
- **åŸºç¡€æŸ¥è¯¢**: < 1ms
- **å¤æ‚æŸ¥è¯¢**: < 1ms
- **åˆ†é¡µæŸ¥è¯¢**: < 1ms
- **æ’åºæŸ¥è¯¢**: < 1ms

### å†…å­˜ä½¿ç”¨
- **æµ‹è¯•æ•°æ®**: 8æ¡è®°å½•
- **å†…å­˜å ç”¨**: æ­£å¸¸
- **æ— å†…å­˜æ³„æ¼**: éªŒè¯é€šè¿‡

## æ€»ç»“

### âœ… æµ‹è¯•ç»“æœ
- **æ€»æµ‹è¯•ç”¨ä¾‹**: 6ä¸ª
- **é€šè¿‡æµ‹è¯•**: 6ä¸ª
- **å¤±è´¥æµ‹è¯•**: 0ä¸ª
- **é€šè¿‡ç‡**: 100%

### ğŸ¯ åŠŸèƒ½çŠ¶æ€
- **IN æŸ¥è¯¢åŠŸèƒ½**: âœ… å®Œå…¨æ­£å¸¸
- **ç±»å‹è½¬æ¢**: âœ… å®Œå…¨æ­£å¸¸
- **åˆ†é¡µé›†æˆ**: âœ… å®Œå…¨æ­£å¸¸
- **æ’åºé›†æˆ**: âœ… å®Œå…¨æ­£å¸¸
- **å¤šæ¡ä»¶æŸ¥è¯¢**: âœ… å®Œå…¨æ­£å¸¸

### ğŸ“‹ å»ºè®®
1. **ç”Ÿäº§ä½¿ç”¨**: IN æŸ¥è¯¢åŠŸèƒ½å¯ä»¥å®‰å…¨ç”¨äºç”Ÿäº§ç¯å¢ƒ
2. **æ€§èƒ½ç›‘æ§**: å»ºè®®ç›‘æ§å¤§é‡æ•°æ®çš„ IN æŸ¥è¯¢æ€§èƒ½
3. **æ–‡æ¡£æ›´æ–°**: å¯ä»¥æ›´æ–° API æ–‡æ¡£ï¼Œæä¾›æ›´å¤š IN æŸ¥è¯¢çš„ä½¿ç”¨ç¤ºä¾‹

### ğŸ”§ æŠ€æœ¯å®ç°
- **è§£æé€»è¾‘**: `parseInValues` å‡½æ•°æ­£ç¡®è§£æ IN æŸ¥è¯¢å‚æ•°
- **æŸ¥è¯¢æ„å»º**: `validateAndBuildCondition` å‡½æ•°æ­£ç¡®æ„å»º IN æŸ¥è¯¢æ¡ä»¶
- **ç±»å‹å¤„ç†**: è‡ªåŠ¨ç±»å‹è½¬æ¢é€»è¾‘å·¥ä½œæ­£å¸¸
- **SQL ç”Ÿæˆ**: ç”Ÿæˆçš„ SQL è¯­å¥è¯­æ³•æ­£ç¡®ä¸”å®‰å…¨

IN æŸ¥è¯¢åŠŸèƒ½ç»è¿‡å…¨é¢æµ‹è¯•ï¼Œå„é¡¹åŠŸèƒ½å‡æ­£å¸¸å·¥ä½œï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚
